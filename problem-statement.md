# Exploring the affinity of AI code generators for Design Patterns

### Problem statement

The increasing adoption of AI-powered code-generation tools like GitHub Copilot, DeepSeek, and GPT has raised questions about their ability to generate high-quality and maintainable code. In the field of Software Architecture, Design patterns are proven solutions to common software design problems, and their use is often associated with better code quality. However, it is currently unclear whether these AI models inherently favour or avoid the use of design patterns when generating code. This study aims to investigate how different AI code-generation models (Copilot, DeepSeek, and GPT) incorporate design patterns into their outputs when solving programming problems.

#### Potential RQs

1. **Do AI code-generation models promote the use of design patterns when solving programming problems?**
2. **Are there differences in the frequency and types of design patterns generated by Copilot, Deepseek, and GPT?**
3. **What factors in the input prompts influence the generation of design patterns?**

---

### Steps

#### 1. **Define the scope and objectives**

- Clearly define the design patterns to be studied (e.g., Singleton, Factory, Observer, etc.)
- Identify the programming languages in the scope
- Determine the metrics for evaluating the presence and quality of design patterns (e.g., frequency, correctness, relevance). This can be facilitaded via Design Patterns detection tools (as described in the annotated papers)

#### 2. **Select design patterns and problem scenarios**

- Choose a set of common design patterns that are widely applicable across different programming problems
- Develop problem scenarios or prompts that are likely to elicit the use of these design patterns For example:
  - **Singleton**: "Write a Python class that ensures only one instance of the class can exist"
  - **Factory**: "Generate a Java program that creates different types of vehicles based on user input"
  - **Observer**: "Create a C# implementation of a weather station that notifies multiple displays when the temperature changes"

#### 3. **Craft prompts for code generation**

- Write prompts that describe the problem without explicitly mentioning the design pattern. This ensures that the AI models generate code organically rather than being influenced
- Include variations of prompts to test how different phrasings or levels of detail influence the output (refer to Fragkathoulas' paper for a way to manipulate prompts)

#### 4. **Generate code using AI models**

- Use GitHub Copilot, DeepSeek, and GPT to generate code for each problem scenario (a dataset such as DevGPT can be useful for this)
- Ensure that the same prompt is used across all models for consistency
- Generate multiple responses for each prompt to account for variability in the outputs

#### 5. **Detect and analyze design patterns**

- Use automated tools (e.g., Design Pattern Detection tools like DPJF, Ptidej, or custom scripts) to analyze the generated code for the presence of design patterns
- Manually verify the detected patterns to ensure accuracy and relevance to the problem

#### 6. **Compare results across models**

- Compare the frequency and types of design patterns generated by each model
- Analyze whether certain models consistently favor specific design patterns or avoid them altogether
- Evaluate the quality and correctness of the generated patterns

#### 7. **Identify factors influencing design pattern generation**

- Analyze how variations in prompts (e.g., level of detail, specificity, omission) influence the likelihood of design patterns being generated
- Identify any patterns in the types of problems or prompts that lead to the use of design patterns

---

### Example prompts for testing design patterns

1. **Singleton pattern**
   `"Write a Python class that manages a shared configuration object. Ensure that only one instance of the class can exist."`

2. **Factory pattern**
   `"Generate a Java program that creates different types of documents (e.g., PDF, Word) based on user input."`

3. **Observer pattern**
   `"Create a C# implementation of a stock market system where multiple investors are notified when the price of a stock changes."`

---

### Potential contributions

- A quantitative comparison of how often each model generates code containing design patterns
- Insights into the types of design patterns favored by each model
- Insights into the presence (or absence) of anti-patterns
